# GitHub Copilot Instructions - akkoyun.net

## Project Overview

This is a **Docusaurus v3-based personal website** featuring Turkish technical content across three main content sections: books (kitaplar), articles (makaleler), and open-source libraries (acik-kaynak). The site uses a multi-plugin architecture to handle separate documentation instances.

## Architecture

### Multi-Plugin Content Structure

The project uses **three separate `@docusaurus/plugin-content-docs` instances** instead of the default single docs plugin:

```typescript
// docusaurus.config.ts
docs: false,  // Default docs disabled
plugins: [
  ['@docusaurus/plugin-content-docs', { id: 'kitaplar', path: 'kitaplar', routeBasePath: 'kitaplar', ... }],
  ['@docusaurus/plugin-content-docs', { id: 'makaleler', path: 'makaleler', routeBasePath: 'makaleler', ... }],
  ['@docusaurus/plugin-content-docs', { id: 'acik-kaynak', path: 'acik-kaynak', routeBasePath: 'acik-kaynak', ... }],
]
```

**Why:** Each content type has distinct navigation, sidebar structure, and organization requirements. This separation allows independent versioning and routing.

### Content Organization

- **kitaplar/**: Technical books with chapter-based structure (subdirectories per book)
  - Uses manually configured sidebar (`sidebarsKitaplar.ts`) with category hierarchies
  - Example: `kitaplar/donanim-girisimciligi/` contains full book chapters
  
- **makaleler/**: Standalone technical articles
  - Uses autogenerated sidebar (`sidebarsMakaleler.ts`)
  - Flat structure; each `.mdx` is an independent article
  
- **acik-kaynak/**: Open-source library documentation
  - Uses autogenerated sidebar (`sidebarsAcikKaynak.ts`)
  - Each file documents one library (e.g., `DS28C.mdx`, `MAX17055.mdx`)
  - Includes custom `OpenSourceLayout` wrapper with footer component

## Development Workflow

### Essential Commands

```bash
npm start              # Dev server on localhost:3000
npm run build          # Production build (validates all links)
npm run serve          # Preview production build locally
npm run typecheck      # TypeScript validation
npm run clear          # Clear Docusaurus cache (use when config changes)
```

**Note:** `npm run build` throws on broken links (`onBrokenLinks: 'throw'`). Always fix link errors before committing.

## Content Conventions

### MDX Frontmatter Requirements

All content files use MDX with specific frontmatter patterns:

**Kitaplar (Books):**
```yaml
---
id: unique-slug
title: Chapter/Section Title
sidebar_label: Short Label
slug: /relative-path
sidebar_position: 1
description: Brief description
hide_title: false/true
pagination_prev: null  # Often disabled for intro pages
pagination_next: null
---
```

**Açık Kaynak (Open Source):**
```yaml
---
title: Library Name
description: Library description
slug: /library-slug
sidebar_label: Library Name
github_url: https://github.com/akkoyun/repo-name
tags: [tag1, tag2, tag3]
---
import OpenSourceLayout from '@site/src/layouts/OpenSourceLayout';

<OpenSourceLayout>
  ... content ...
</OpenSourceLayout>
```

**Critical:** Open-source pages MUST wrap content in `<OpenSourceLayout>` to display the custom footer with contact/licensing information.

### Turkish Content

All content is in **Turkish** (`i18n.defaultLocale: 'tr'`). Maintain Turkish language for:
- MDX file content
- Sidebar labels
- Navigation items
- Footer text

### Image Management

Images are organized in `static/img/` subdirectories:
- `static/img/acik-kaynak/` - Open-source library images
- `static/img/makaleler/` - Article images/diagrams
- `static/img/kisisel/` - Personal/profile images

Reference in MDX: `/img/makaleler/example.png` (no `static/` prefix)

## Sidebar Configuration Patterns

### Manual Sidebar (kitaplarSidebar)

```typescript
// sidebarsKitaplar.ts
kitaplarSidebar: [
  'intro',  // Single doc
  {
    type: 'category',
    label: 'Book Title',
    link: { type: 'doc', id: 'book-folder/book-giris' },  // Category index page
    items: [{ type: 'autogenerated', dirName: 'book-folder' }],  // Auto-generate from folder
  },
]
```

**Pattern:** Categories have a dedicated intro/index page (e.g., `donanim-girisimciligi-giris.mdx`) that serves as the category landing page.

### Autogenerated Sidebars

```typescript
// sidebarsMakaleler.ts, sidebarsAcikKaynak.ts
sidebar: [{ type: 'autogenerated', dirName: '.' }]
```

Uses file order determined by `sidebar_position` in frontmatter.

## Custom Components & Layouts

### OpenSourceLayout

- **Location:** `src/layouts/OpenSourceLayout.js`
- **Purpose:** Wraps open-source library pages with custom footer
- **Footer:** `src/components/OpenSourceFooter.js` displays licensing and contact information
- **Usage:** Required for all `acik-kaynak/*.mdx` files

### Custom CSS

- **File:** `src/css/custom.css`
- **Key customizations:**
  - Navbar icon styling (`.navbar-icon-link`)
  - Color scheme variables (light mode enforced: `disableSwitch: true`)

## Search Configuration

Uses **@easyops-cn/docusaurus-search-local** for offline search:

```typescript
themes: [[require.resolve('@easyops-cn/docusaurus-search-local'), {
  hashed: true,
  language: ['tr'],
  docsRouteBasePath: ['kitaplar', 'makaleler', 'acik-kaynak'],  // All three content areas
  indexDocs: true,
  indexBlog: true,
}]]
```

**Important:** All three plugin IDs must be listed in `docsRouteBasePath` for search to work across all sections.

## Navigation & Routing

- Base URL: `/` (deployed to akkoyun.net)
- Content routes: `/kitaplar/`, `/makaleler/`, `/acik-kaynak/`
- Navbar uses `type: 'docSidebar'` with plugin ID references:
  ```typescript
  { type: 'docSidebar', sidebarId: 'kitaplarSidebar', docsPluginId: 'kitaplar', label: 'Kitaplar' }
  ```

## Analytics

Uses **GoatCounter** (privacy-focused analytics):
```typescript
scripts: [{ src: 'https://gc.zgo.at/count.js', 'data-goatcounter': 'https://akkoyun.goatcounter.com/count' }]
```

## Common Pitfalls

1. **Broken plugin references:** When adding navbar items, always specify correct `docsPluginId` (kitaplar/makaleler/acik-kaynak)
2. **Missing OpenSourceLayout:** Open-source pages without the layout wrapper won't display footer
3. **Sidebar ID mismatches:** Ensure sidebar names in config files match references in `docusaurus.config.ts`
4. **Link validation:** All internal links must be valid; build fails on broken links
5. **Clear cache after config changes:** Run `npm run clear` if plugins or sidebars aren't updating

## TypeScript Configuration

- Uses strict TypeScript (`typescript: ~5.6.2`)
- Config imports types: `import type {Config} from '@docusaurus/types'`
- Always use `satisfies` for type-safe configurations

## Future Flags

```typescript
future: { v4: true }  // Docusaurus v4 compatibility enabled
```

Code changes should be compatible with upcoming Docusaurus v4.
